# 📘 LJC 三国群英传
## 游戏企划书 v2.2（完整版 · 独立可读 · Steam 单机）

> ⚠️ 本文档为 **完整独立版游戏企划书**  
> 假设读者 **从未看过 v1 / v2 / 任何历史版本**  
> 所有系统从 0 开始解释，不依赖外部文档
>
> 目标读者：
> - 后端程序
> - 数值策划
> - 未来的你自己
>
> 本版本号：**v2.2**  
> 状态：**规则冻结版（可直接实现）**

---

# 一 游戏总体概述

## 1.1 游戏类型与平台

- 平台：Steam（PC 单机）
- 类型：
    - 回合制战斗
    - 策略资源管理
    - 战役推进 + 爬塔挑战
- 核心卖点：
    - 后期“神将”爽感
    - 兵力作为消耗资源
    - 战斗具备不确定性但可被理解与控制

---

## 1.2 核心设计理念（必须理解）

1. **没有抽卡**
    - 不存在随机获取武将的系统
    - 所有武将通过明确条件解锁

2. **兵是消耗品，武将是核心资产**
    - 兵通过金币招募，会在战斗中大量损耗
    - 武将会持续成长，并贯穿多个周目

3. **战斗允许极端结果，但不能失控**
    - 允许一回合秒杀
    - 允许 20 回合平局
    - 所有结果都可被规则解释

---

# 二 世界结构与模式

## 2.1 国家与阵营

游戏中存在四个国家：

- CN
- JP
- KR
- GB

每个国家拥有：
- 自己的主线关卡
- 自己的特种兵
- 对应可解锁的武将

---

## 2.2 游戏模式总览

游戏包含三种主要模式：

1. **主线模式（四国战役）**
2. **爬塔模式（Tower）**
3. **后续扩展模式（无尽 / 二周目）**（仅预留，不在 v2.2 实现）

---

# 三 主线模式（四国战役）

## 3.1 主线结构

- 每个国家拥有 **10 个关卡**
- 关卡顺序固定，必须按顺序推进
- 单一国家通关后，解锁下一个国家

### 关卡类型说明

| 关卡编号 | 类型 | 说明 |
|--------|------|------|
| 第 1 关 | WALL | 破城关，不发生战斗 |
| 第 2–9 关 | NORMAL | 普通战斗 |
| 第 10 关 | BOSS | Boss 战 |

---

## 3.2 WALL 关卡规则

- 代表攻城破墙
- 不发生战斗
- 固定消耗 **100 点兵力**
- 若兵力不足则无法进入关卡

---

## 3.3 BOSS 关卡规则

- Boss 关敌方属性整体 ×1.5
- 包含敌方武将 + 兵力
- 用于检验当前国家完整战力

---

# 四 爬塔模式（Tower）

## 4.1 解锁条件

- 四个国家 **全部解锁完成**
- 即四国主线全部通关

---

## 4.2 基本规则

- 爬塔层数：1–100 层
- 每一层都是独立战斗
- 允许失败、重试

---

## 4.3 爬塔掉落（非常重要）

**爬塔是“设计图”的唯一来源**

| 掉落类型 | 说明 |
|--------|------|
| 设计图 | 装备制造核心资源 |
| 材料 | 用于强化与合成 |
| 金币 | 少量补充 |

Boss 层：
- 掉落设计图概率更高
- 后期可加入 Boss 专属武器设计图

---

# 五 武将系统（核心）

## 5.1 武将获取方式（无随机）

游戏中 **不存在抽卡系统**。

武将通过以下方式解锁：

1. 首次通关新手关
2. 某国家主线全部通关
3. 完成爬塔一周目目标

---

## 5.2 解锁 ≠ 可用（激活机制）

- 解锁后，武将处于“未激活”状态
- 玩家需消耗资源进行激活
- 未激活武将不可出征

---

## 5.3 武将成长

### 等级
- 升级消耗金币
- 有等级上限

### 升阶（Ascension）
- 升阶资格：**全局一次**
- 升阶后：
    - 等级上限提升
    - 基础属性成长提升
    - 技能数值增强

---

# 六 兵系统（资源消耗核心）

## 6.1 兵的获取

- 兵通过金币在主城中招募
- 招募后进入长期库存
- 兵不是一次性关卡资源

---

## 6.2 兵种类型

- 步兵（INF）
- 弓兵（ARC）
- 骑兵（CAV）
- 特种兵（ELITE）

---

## 6.3 出征容量

- 每名武将有统帅上限（capacity）
- 基础兵 cost = 1
- 特种兵 cost = 2
- 总占用不得超过 capacity

---

# 七 战斗系统（回合制）

## 7.1 基本规则

- 回合制战斗
- 允许一回合结束
- 最大回合数 = 20
- 超过则判定为平局（DRAW）

---

## 7.2 出手顺序

1. 武将阶段
2. 士兵阶段
    - 武将阶段胜利的一方士兵先手
    - 士兵顺序固定：  
      ARC → INF → CAV → ELITE

---

## 7.3 克制关系

- ARC 克 INF
- INF 克 CAV
- CAV 克 ARC
- 克制伤害倍率 = 1.2

---

# 八 核心机制：兵种比例 Roll 攻击武将

## 8.1 设计目的

- 防止武将被瞬间集火秒杀
- 确保武将会稳定承受伤害
- 降低计算量，增强规则可解释性

---

## 8.2 Roll 的执行方式（关键）

**每一回合，每一个兵种，各自 roll 一次**

也就是说：
- 每回合最多进行 **4 次 roll**
- 不是每个兵 roll
- 不是 all-in 攻击武将

---

## 8.3 Roll 的含义

对于某一兵种：

1. 生成一个随机数 r，范围 0–100
2. r 表示：
    - 该兵种中，有 r% 的单位攻击敌方武将
    - 剩余 (100 - r)% 的单位攻击敌方士兵

---

## 8.4 示例说明

- 步兵数量：200
- 本回合 roll 结果：r = 15

结果：
- 30 个步兵攻击武将
- 170 个步兵攻击敌方士兵

---

## 8.5 Roll 修正（配置化）

roll 结果在最终使用前，可被修正：

- 前排兵不足 → 上调
- 武将当前 HP 较低 → 下调
- BOSS 关卡 → 上调

最终：
```
r_final = clamp(r + 修正值, 0, 100)
```

---

# 九 武将性格系统

## 9.1 触发条件

- 武将 HP **首次** 低于或等于 10%

---

## 9.2 性格类型与效果

- **RETREAT（撤退型）**
    - 立即：己方士兵总 HP -20%

- **LAST STAND（死战型）**
    - 若武将阵亡：
        - 士兵总 HP -40%
        - 士兵 ATK -10%

---

# 十 武将休息机制

## 10.1 触发条件

- 战斗结束时，武将 HP ≤ 5%

---

## 10.2 规则说明

- 武将进入“休息状态”
- 休息状态下不可出征
- 需要 **休息 1 次出征机会**

---

## 10.3 恢复

- 休息完成后：
    - 武将恢复满血
    - 状态解除

---

# 十一 兵力结算与抢救

## 11.1 战斗统计

- 出征兵力 = 存活 + 伤兵 + 阵亡

---

## 11.2 伤兵比例

- 伤兵占阵亡的 60%

---

## 11.3 抢救比例

| 结果 | 抢救比例 |
|----|---------|
| 胜利 | 60% |
| 失败 | 10% |
| 平局 | 10% |

返还兵力：
```
存活兵力 + floor(伤兵 × 抢救比例)
```

---

# 十二 装备系统

## 12.1 装备槽位（6）

1. 武器（ATK）
2. 防具 A（HP）
3. 防具 B（HP）
4. 鞋子（SPD）
5. 旗子（兵团光环）
6. 兵符（带兵上限）

---

## 12.2 强化

- 强化等级：+0 ~ +8
- 消耗金币与材料
- 强化成功率 100%

---

# 十三 宝石系统

- 每件装备 2 个宝石孔
- 宝石镶嵌后不可拆卸
- 同类型宝石 5 合 1 升级
- 最高 5 级
- 初期宝石属性：ATK / HP

---

# 十四 设计图合成

- 合成消耗：
    - 设计图
    - 材料
    - 金币
- 有成功率
- 失败则设计图碎裂

---

# 十五 总结（v2.2）

- 本文档 **独立可读**
- 不依赖任何历史版本
- 可直接用于开发实现
- 后续版本仅在此基础上演进
